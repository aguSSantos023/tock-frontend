<div class="min-h-screen flex items-center justify-center bg-gray-950 px-4 font-sans">
  <div
    class="max-w-md w-full bg-gray-900 rounded-xl shadow-2xl p-8 border border-gray-800 relative"
  >
    <button
      (click)="onLogout()"
      class="absolute top-4 right-4 text-gray-500 hover:text-red-400 text-xs transition-colors flex items-center gap-1 cursor-pointer"
    >
      <span>Cerrar sesión</span>
    </button>

    <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-white tracking-tight">Verifica tu correo</h2>
      <p class="text-gray-400 mt-2 text-sm">
        Introduce el código de 6 dígitos que enviamos a tu email.
      </p>
    </div>

    <div class="flex justify-center gap-2 mb-8" (paste)="onPaste($event)">
      @for (item of [0, 1, 2, 3]; track $index) {
        <input
          #otpInput
          type="text"
          maxlength="1"
          (input)="onInput($event, $index)"
          (keydown.backspace)="onBackspace($index)"
          class="w-12 h-14 text-center text-2xl font-bold rounded-lg bg-gray-800 border border-gray-700 text-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all uppercase"
        />
      }
    </div>

    @if (errorMessage()) {
      <div
        class="mb-6 p-3 bg-red-900/30 border border-red-800 rounded text-red-300 text-sm text-center"
      >
        {{ errorMessage() }}
      </div>
    }

    <button
      (click)="onVerify()"
      [disabled]="isSubmitting() || !isCodeComplete()"
      class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed mb-6 cursor-pointer"
    >
      @if (isSubmitting()) {
        <span>Verificando...</span>
      } @else {
        <span>Verificar Cuenta</span>
      }
    </button>

    <div class="text-center">
      @if (resendTimer() > 0) {
        <p class="text-sm text-gray-500">
          Podrás solicitar otro código en
          <span class="text-indigo-400 font-mono">{{ resendTimer() }}s</span>
        </p>
      } @else {
        <button
          (click)="onResend()"
          class="text-sm text-indigo-400 hover:text-indigo-300 font-medium transition-colors cursor-pointer"
        >
          ¿No recibiste el código? Reenviar
        </button>
      }
    </div>
  </div>
</div>
